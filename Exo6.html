<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="shortcut icon" href="./images/lézard.png" type="image/x-icon">
    <title>Exercice 6</title>
</head>

<body>
    <header>
        <!--Barre de nav-->
        <nav class="navbar navbar-expand-lg navbar-light bg-success">
            <div class="container-fluid">
                <a class="navbar-brand" href="index.html">Accueil</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">

                        <li class="nav-item">
                            <a class="nav-link" href="Exo1.html">Exercice 1</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Exo2.html">Exercice 2</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Exo3.html">Exercice 3</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Exo4.html">Exercice 4</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Exo5.html">Exercice 5</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Exo6.html">Exercice 6</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Exo7.html">Exercice 7</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Exo8.html">Exercice 8</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Exo9.html">Exercice 9</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Exo10.html">Exercice 10</a>
                        </li>

                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <!--énoncer-->
    <div class="container">
        <h1>Question 6</h1>
        <p>
            <strong>Réalisez une application de gestion qui calcul la prime d'assurance d'un client.</strong><br>
            <br>
            <strong>Rappel de l'énoncé du cours d'algorithme : </strong><br>

            Une compagnie d'assurance automobile propose à ses clients quatre familles de tarifs identifiables par une
            couleur, du
            moins au plus onéreux : tarifs bleu, vert, orange et rouge.<br>
            <br>
            <strong>Le tarif dépend de la situation du conducteur :</strong><br>
            <br>
            • un conducteur de moins de 25 ans et titulaire du permis depuis moins de deux ans, se voit attribuer le
            tarif rouge, si
            toutefois il n'a jamais été responsable d'accident. Sinon, la compagnie refuse de l'assurer.
            <br>
            • un conducteur de moins de 25 ans et titulaire du permis depuis plus de deux ans, ou de plus de 25 ans mais
            titulaire
            du permis depuis moins de deux ans a le droit au tarif orange s'il n'a jamais provoqué d'accident, au tarif
            rouge pour
            un accident, sinon il est refusé.
            <br>
            • un conducteur de plus de 25 ans titulaire du permis depuis plus de deux ans bénéficie du tarif vert s'il
            n'est à
            l'origine d'aucun accident et du tarif orange pour un accident, du tarif rouge pour deux accidents, et
            refusé au-delà.
            <br>
            • De plus, pour encourager la fidélité des clients acceptés, la compagnie propose un contrat de la couleur
            immédiatement
            la plus avantageuse s'il est entré dans la maison depuis plus d'un an.<br>

            <strong>Dans tous les cas on refuse un conducteur qui aurait plus de 3 accidents.</strong>
        </p>
        
    </div>
    <form style="background-color:yellowgreen; text-align: center;">
        <div class="mb-3 mt-3">
            <label class="form-label">Age du conducteur</label> <br>
            <input class="form-control-lg" type="number" id="age-id" min="18" max="120" value="18"/>
        </div>

        <div class="mb-3 mt-3">
            <label class="form-label">Année de permis</label> <br>
            <input class="form-control-lg" type="number" id="permis-id" min="0" max="80" value="0"/>
        </div>

        <div class="mb-3 mt-3">
            <label class="form-label">Fidélité</label> <br>
            <input class="form-control-lg" type="number" id="fidelite-id" min="0" max="105" value="0"/>
        </div>

        <div class="mb-3 mt-3">
            <label class="form-label">Accident</label> <br>
            <input class="form-control-lg" type="number" id="accident-id" min="0" max="10" value="0"/>
        </div>
        <button id="btn-valider-id" type="submit" class="btn btn-success">Valider</button>
    </form>
    <br>
    <div id="message-id"></div>

    <footer class="mt-auto" style="text-align: center;">
        <div class="fix-bottom  p-4" style="background-color: rgba(0, 0, 0, 0.05);">
            © 2022 Copyright:
            AFPA
        </div>
    </footer>


    <!--Début de l'exo-->

    <script>
        "use strict"; // Oblige la déclaration des variables
        // Zone de déclaration des PROCEDURES ET FONCTIONS
function calculePrime(event){
    //recupération des zones de saisie
    let age = document.getElementById("age-id").value;
    let perm = document.getElementById("permis-id").value;
    let assur = document.getElementById("fidelite-id").value;
    let acc = document.getElementById("accident-id").value;

    //recupération de la zone d'affichage du message
    let message = document.getElementById("message-id");

    let C1, C2, C3;
    let situ;

    //Se déclenche lorsque toute la page est chargée
    C1 = age >=25;
    C2 = perm >=2;
    C3 = assur > 1;

    if (!C1 && !C2) {
        //Moins de 25 ans et moins de 2 ans de permis
        if (acc == 0) {
            situ = "Rouge";
        } else {
            situ = "Refusé"
        }
    } else {
        //plus de 25 ans ou plus de 2 ans de permis
        if ((!C1 && C2)|| (C1 && !C2)) {
            //moins de 25 ans et plus de 2 ans de permis
            //Ou plus de 25 ans et pas 2 ans de permis
            if (acc == 0) {
                situ = "Orange";
            } else {
                if ((acc = 1)) {
                    situ = "Rouge";
                } else {
                    situ = "Refusé";
                }
            }
            
        } else {
            //plus de 25 ans et plus de 2 ans de permis
            if (acc == 0) {
                situ = "Vert";
            } else {
                if (acc == 1) {
                    situ = "Orange";
                } else {
                    if (acc == 2) {
                        situ = "Rouge";
                    } else {
                        situ = "Refusé";
                    }
                }
                
            }
        }
        
    }

    if (C3) {
        if (situ == "Rouge") {
            situ = "Orange";
        } else {
            if (situ == "Orange") {
                situ = "Vert";
            } else {
                if (situ == "Vert") {
                    situ = "Bleu";
                }
            }
        }
        
    }


    // Affichage du tarif dans la zone Message

    if (situ == "Bleu") {
        message.innerHTML = "<div class='alert alert-info'><strong>Bienvenue ! </strong><span class='text-info'>au Tarif BLEU</span>.</div>";
    } else {
        if (situ == "Vert") {
            message.innerHTML = "<div class='alert alert-success'><strong>Bienvenue ! </strong><span class='text-success'>au Tarif VERT</span>.</div>";
        } else {
            if (situ == "Orange") {
                message.innerHTML = "<div class='alert alert-warning'><strong>Bienvenue ! </strong><span class='text-warning'>au Tarif ORANGE</span>.</div>";
            } else {
                if (situ == "Rouge") {
                    message.innerHTML = "<div class='alert alert-danger'><strong>Bienvenue ! </strong><span class='text-danger'>au Tarif ROUGE</span>.</div>";
                } else {
                    message.innerHTML = "<h1>Vous ne pouvez pas vous assurer !!!</h1>";
                }
                
            }
        }
        
    }

    // on annule la soumission du formulaire
    event.preventDefault();
}
        // Zone de déclaration des variables GLOBALES 
        // (celles du programme PRINCIPAL)

        // Se déclenche lorsque TOUTE LA PAGE est chargée (Style, images etc..)
        window.addEventListener('load', (event) => {
            // Le code de PROGRAMME PRINCIPAL
            let btn_valider = document.getElementById("btn-valider-id");

            btn_valider.addEventListener("click", calculePrime, false);

        });



    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>

</html>